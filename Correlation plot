import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt
import numpy as np

# Assuming your data is in a DataFrame called 'df'

df_scaled=df_scaled.drop('Sample name', axis=1)

# Calculate the correlation matrix
correlation_matrix = df_scaled.corr()

# Define column names (use your actual column names)
columns = ['Lignin (wt%)', 'Co-polyol (wt%)',
       'Co-polyol type (PTHF)', 'Isocyanate (wt%)', 'Isocyanate (mmol NCO)',
       'Isocyanate type', 'Ratio', 'Tin(II) octoate', 'Tg (Â°C)', 'Swelling ratio (%)']

# Create a mask to show only the lower triangle
mask = np.triu(np.ones_like(correlation_matrix, dtype=bool))

# Set the font scale for all text elements
sns.set(font_scale=1.5)

# Create the heatmap
plt.figure(figsize=(12, 10))
sns.heatmap(correlation_matrix, mask=mask, annot=True, cmap='coolwarm', vmin=-1, vmax=1, center=0, square=True, 
            annot_kws={"size": 18}, fmt=".2f")

# Set labels
plt.xlabel('Features', fontsize=24)
plt.ylabel('Features', fontsize=24)

# Rotate the x-axis labels for better readability
plt.xticks(rotation=45, ha='right')

# Adjust the layout to prevent cutting off labels
plt.tight_layout()

# Save the figure in multiple formats
for ext in ['tiff', 'jpg']:
    plt.savefig(f'Correlation matrix .{ext}', dpi=600, bbox_inches='tight')

# Show the plot
plt.show()
